<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Policy Brief: Addressing the Teacher Shortage Crisis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            line-height: 1.8;
            color: #2c3e50;
            background: #f8f9fa;
        }

        nav {
            background: #1a252f;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            padding: 0 1rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background 0.3s;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        nav a:hover, nav a.active {
            background: rgba(255,255,255,0.15);
        }

        .page {
            display: none;
            min-height: calc(100vh - 120px);
        }

        .page.active {
            display: block;
        }

        .header-banner {
            background: linear-gradient(135deg, #1a252f 0%, #2c3e50 100%);
            color: white;
            padding: 3rem 2rem 2rem 2rem;
            text-align: center;
            border-bottom: 4px solid #3498db;
        }

        .header-banner h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .header-banner .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            font-style: italic;
        }

        .content {
            max-width: 1100px;
            margin: 0 auto;
            padding: 3rem 2rem;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .brief-section {
            margin-bottom: 3rem;
        }

        .brief-section h2 {
            color: #1a252f;
            font-size: 1.8rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #3498db;
        }

        .brief-section h3 {
            color: #2c3e50;
            font-size: 1.3rem;
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }

        .executive-summary {
            background: #e8f4f8;
            border-left: 5px solid #3498db;
            padding: 1.5rem;
            margin: 2rem 0;
            font-size: 1.05rem;
        }

        .data-dashboard {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-box {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-top: 4px solid #e74c3c;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #e74c3c;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .stat-label {
            font-size: 0.95rem;
            color: #555;
            margin-top: 0.5rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .chart-placeholder {
            background: white;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 3rem;
            text-align: center;
            margin: 1.5rem 0;
            color: #6c757d;
        }

        .chart-placeholder p {
            margin-bottom: 1rem;
        }

        .chart-placeholder code {
            background: #f8f9fa;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .chart-container {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .chart-container h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
            text-align: center;
            font-size: 1.1rem;
        }

        .chart-canvas {
            max-width: 100%;
            height: 83px;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }

        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        .stakeholder-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .stakeholder-card {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 1.5rem;
            border-radius: 4px;
        }

        .stakeholder-card h4 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .policy-option {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .policy-option h3 {
            color: #2c3e50;
            margin-top: 0;
        }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        .pros, .cons {
            padding: 1rem;
            border-radius: 4px;
        }

        .pros {
            background: #d5f4e6;
            border-left: 4px solid #27ae60;
        }

        .cons {
            background: #fadbd8;
            border-left: 4px solid #e74c3c;
        }

        .pros h4, .cons h4 {
            margin-top: 0;
            margin-bottom: 0.5rem;
        }

        ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        .recommendation {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .recommendation h3 {
            color: #856404;
            margin-top: 0;
        }

        .citation {
            font-size: 0.9rem;
            color: #666;
            border-top: 1px solid #dee2e6;
            padding-top: 2rem;
            margin-top: 3rem;
        }

        .citation-item {
            margin-bottom: 0.8rem;
            padding-left: 1.5rem;
            text-indent: -1.5rem;
        }

        footer {
            background: #1a252f;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 0;
        }

        @media (max-width: 768px) {
            .header-banner h1 {
                font-size: 1.8rem;
            }

            .content {
                padding: 2rem 1rem;
            }

            .pros-cons {
                grid-template-columns: 1fr;
            }

            nav ul {
                gap: 0.5rem;
            }

            nav a {
                font-size: 0.9rem;
                padding: 0.4rem 0.8rem;
            }
        }

        p {
            margin-bottom: 1rem;
        }

        .highlight {
            background: #fff3cd;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        tr:hover {
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#overview" class="nav-link active">Overview</a></li>
            <li><a href="#data" class="nav-link">Data & Analysis</a></li>
            <li><a href="#causes" class="nav-link">Root Causes</a></li>
            <li><a href="#stakeholders" class="nav-link">Stakeholders</a></li>
            <li><a href="#policy" class="nav-link">Recommendations</a></li>
        </ul>
    </nav>

    <!-- Overview Page -->
    <div id="overview" class="page active">
        <div class="header-banner">
            <h1>Addressing the Teacher Shortage Crisis</h1>
        </div>
        
        <div class="content">
            <div class="executive-summary">
                <h2>Executive Summary</h2>
                <p>Education equity is an issue in America. With various districts and states having different levels of funding, the quality of a public school education cannot always be guaranteed to be optimal. Students deserve an adequate education regardless of status. One issue that impacts education quality is the increase in teacher shortages. Some stakeholders in this situation are teachers who are unhappy with the inadequate pay and high workload of the public educator role. Students and their families are another stakeholder who bear the brunt of shortages due to the effects on the quality of education and turbulence in classroom environments.</p>
                <p>Teaching shortages are an issue that is facing countless school districts across the nation. These shortages seem to especially affect low-income areas, increasing the disadvantages of these students. Teaching shortages can be attributed to factors such as low pay rates, high-stress environments, and less-than-ideal professional support. Shortages can lead to high teacher-to-student ratios or even the hiring of uncertified teachers, which can lead to a decline in educational quality, impacting student success. Do teaching shortages have an impact on student outcomes, such as attendance and test performances?</p>
            </div>

            <div class="brief-section">
                <h2>The Crisis at a Glance</h2>
                <p>The teacher shortage has reached critical levels, with <span class="highlight">55% of public schools</span> reporting difficulties finding qualified educators. This crisis affects not just the quantity of teachers available, but fundamentally threatens educational quality and student outcomes.</p>

                <div class="stat-grid">
                    <div class="stat-box">
                        <div class="stat-number">55%</div>
                        <div class="stat-label">Schools struggling to hire</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number">300K</div>
                        <div class="stat-label">Estimated shortage</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number">2.8%</div>
                        <div class="stat-label">National shortage rate</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number">23.4%</div>
                        <div class="stat-label">Teacher absenteeism</div>
                    </div>
                </div>

                <h3>Impact on Students</h3>
                <p>The teacher shortage disproportionately affects vulnerable student populations. High-poverty schools are three times more likely to have teachers without proper certification. Students in these schools face larger class sizes, less experienced teachers, and reduced access to specialized instruction in subjects like mathematics, science, and special education.</p>

                <h3>Geographic Disparities</h3>
                <p>The crisis varies significantly by region. Some states face severe shortages, with Nevada, Arizona, and Mississippi experiencing rates above 4%. Rural areas struggle more than urban centers, often unable to compete with metropolitan salaries and lacking the infrastructure to attract new teachers.</p>
            </div>
        </div>
    </div>

    <!-- Data & Analysis Page -->
    <div id="data" class="page">
        <div class="header-banner">
            <h1>Data & Analysis</h1>
        </div>
        
        <div class="content">
            <div class="brief-section">
                <h2>National Overview</h2>
                <p>The following visualizations provide a comprehensive view of the teacher shortage crisis across multiple dimensions, from state-by-state comparisons to historical trends in workforce dynamics.</p>

                <div class="data-dashboard">
                    <h3 style="text-align: center; margin-bottom: 1.5rem;">Teacher Shortage Metrics Dashboard</h3>
                    
                    <div class="charts-grid">
                        <div class="chart-container">
                            <h4>Distribution of State Shortage Rates</h4>
                            <canvas id="distributionChart" class="chart-canvas"></canvas>
                        </div>

                        <div class="chart-container">
                            <h4>Average Shortage Rate by Region</h4>
                            <canvas id="regionalChart" class="chart-canvas"></canvas>
                        </div>

                        <div class="chart-container">
                            <h4>Teacher Absenteeism Trends (2018-2024)</h4>
                            <canvas id="absenteeismChart" class="chart-canvas"></canvas>
                        </div>

                        <div class="chart-container">
                            <h4>Teaching Job Market Trends</h4>
                            <canvas id="jobTrendsChart" class="chart-canvas"></canvas>
                        </div>
                    </div>
                </div>

                <h3>Key Data Insights</h3>
                <ul>
                    <li><strong>Regional Variation:</strong> Southern states experience the highest average shortage rates (3.2%), followed by Western states (2.9%). The Midwest shows the lowest rates (2.1%).</li>
                    <li><strong>Subject Area Gaps:</strong> Special education, mathematics, and science positions are hardest to fill, with vacancy rates 40% higher than general education positions.</li>
                    <li><strong>Absenteeism Crisis:</strong> Teacher absenteeism has increased by 54% since 2018, with pandemic-era peaks reaching 28.7% in 2023.</li>
                    <li><strong>Hiring Challenges:</strong> Despite 2.5 million job openings in 2024, only 1.5 million hires were made, indicating significant recruitment difficulties.</li>
                </ul>

                <h3>Data Sources & Methodology</h3>
                <p>This analysis draws from multiple authoritative sources including the National Center for Education Statistics (NCES), Bureau of Labor Statistics JOLTS data, state department of education reports, and the Learning Policy Institute's comprehensive studies on teacher workforce trends.</p>
            </div>
        </div>
    </div>

    <!-- Causes Page -->
    <div id="causes" class="page">
        <div class="header-banner">
            <h1>Root Causes</h1>
        </div>
        
        <div class="content">
            <div class="brief-section">
                <h2>Primary Contributing Factors</h2>

                <h3>1. Compensation & Economic Factors</h3>
                <p>Teacher salaries have failed to keep pace with inflation and comparable professions. The <span class="highlight">teacher wage penalty</span> (the gap between teacher and comparable professional salaries) has grown to 23.5%, the highest on record. Starting salaries in many districts remain below living wages, particularly in high-cost urban areas.</p>
                <ul>
                    <li>Average starting salary: $41,770 (2023-24)</li>
                    <li>23.5% wage gap compared to similarly educated professionals</li>
                    <li>Out-of-pocket classroom spending averages $750-$1,000 annually</li>
                    <li>Limited salary growth potential compared to private sector careers</li>
                </ul>

                <h3>2. Working Conditions & Burnout</h3>
                <p>Teachers consistently report overwhelming workloads, lack of administrative support, and insufficient resources. The average teacher works 53 hours per week, with significant unpaid overtime for grading, lesson planning, and parent communication. Behavioral challenges in classrooms have increased, often without adequate support systems.</p>

                <h3>3. Professional Autonomy & Respect</h3>
                <p>Educators report decreasing professional autonomy and respect. Standardized testing pressures, rigid curriculum mandates, and micromanagement limit teachers' ability to exercise professional judgment. Public criticism and political controversies around curriculum content have contributed to declining morale.</p>

                <h3>4. Less Interest in Teaching</h3>
                <p>Teacher preparation program enrollment has declined by 35% over the past decade. Multiple factors contribute:</p>
                <ul>
                    <li>Negative public perception of the teaching profession</li>
                    <li>High cost of certification programs with low salary prospects</li>
                    <li>Rigorous testing requirements that deter candidates</li>
                    <li>Lack of targeted recruitment in high-need subject areas</li>
                </ul>

                <h3>5. Retention Challenges</h3>
                <p>Perhaps most concerning is the inability to retain teachers. <span class="highlight">44% of new teachers</span> leave within their first five years, representing a massive loss of investment and institutional knowledge. Early-career attrition is particularly high in high-poverty schools and among teachers of color.</p>
            </div>
        </div>
    </div>

    <!-- Stakeholders Page -->
    <div id="stakeholders" class="page">
        <div class="header-banner">
            <h1>Key Stakeholders</h1>
        </div>
        
        <div class="content">
            <div class="brief-section">
                <h2>Stakeholder Analysis</h2>
                
                <div class="stakeholder-grid">
                    <div class="stakeholder-card">
                        <h4>Students</h4>
                        <p>The primary affected group. Students face larger class sizes, less individualized attention, and reduced course offerings.</p>
                    </div>

                    <div class="stakeholder-card">
                        <h4>Current Teachers</h4>
                        <p>Experience increased workload, larger classes, and pressure to cover unfilled positions. Many report burnout and consideration of leaving the profession.</p>
                    </div>

                    <div class="stakeholder-card">
                        <h4>School Administrators</h4>
                        <p>Struggle to recruit and retain staff while maintaining educational quality. Often forced to make difficult compromises regarding class sizes and program offerings.</p>
                    </div>

                    <div class="stakeholder-card">
                        <h4>State Governments</h4>
                        <p>Hold primary responsibility for education funding and teacher certification policies. Face budget constraints while needing to address workforce crisis.</p>
                    </div>

                    <div class="stakeholder-card">
                        <h4>Teacher Unions</h4>
                        <p>Advocate for improved working conditions and compensation. Play crucial role in negotiating contracts and representing teacher interests.</p>
                    </div>

                    <div class="stakeholder-card">
                        <h4>Federal Government</h4>
                        <p>Provides supplementary funding and policy frameworks. Can incentivize state-level changes through grants and program support.</p>
                    </div>
                </div>

                <h3>Working Together</h3>
                <p>Addressing the teacher shortage requires unprecedented collaboration. Successful initiatives often involve partnerships between:</p>
                <ul>
                    <li>State departments of education and local school districts</li>
                    <li>Universities and community colleges with K-12 systems</li>
                    <li>Teachers unions and school administration</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Recommendations Page -->
    <div id="policy" class="page">
        <div class="header-banner">
            <h1>Recommendations</h1>
        </div>
        
        <div class="content">
            <div class="brief-section">
                <h2>Recommendations</h2>
                <p>Addressing the teacher shortage requires multi-faceted approaches targeting recruitment, retention, and working conditions. Each policy option involves distinct tradeoffs regarding cost, implementation complexity, and potential effectiveness.</p>

                <div class="policy-option">
                    <h3>Option 1: Competitive Compensation Increases</h3>
                    <p><strong>Description:</strong> Systematically raise teacher salaries to competitive levels with other professions requiring similar education. This could include base salary increases, performance incentives, and bonuses for high-need subjects and locations.</p>
                    
                    <div class="pros-cons">
                        <div class="pros">
                            <h4>Advantages</h4>
                            <ul>
                                <li>Directly addresses primary teacher concern</li>
                                <li>Proven effective in other countries</li>
                                <li>Would improve recruitment and retention</li>
                                <li>Elevates profession status</li>
                            </ul>
                        </div>
                        <div class="cons">
                            <h4>Challenges</h4>
                            <ul>
                                <li>Significant cost increase</li>
                                <li>Requires sustained political will</li>
                                <li>Implementation varies by state capacity</li>
                                <li>May face taxpayer resistance</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="policy-option">
                    <h3>Option 2: Alternative Certification Pathways</h3>
                    <p><strong>Description:</strong> Expand and improve alternative routes to teacher certification, including Teach for America-style programs, career-switcher programs, and competency-based certification rather than course-hour requirements.</p>
                    
                    <div class="pros-cons">
                        <div class="pros">
                            <h4>Advantages</h4>
                            <ul>
                                <li>Increases candidate pool quickly</li>
                                <li>Attracts career changers with real-world experience</li>
                                <li>Lower barrier to entry</li>
                                <li>Relatively low cost</li>
                            </ul>
                        </div>
                        <div class="cons">
                            <h4>Challenges</h4>
                            <ul>
                                <li>Quality concerns from education community</li>
                                <li>Alternative-cert teachers show higher attrition</li>
                                <li>May not address retention issues</li>
                                <li>Requires strong mentoring support</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="policy-option">
                    <h3>Option 3: Service Scholarships and Loan Forgiveness</h3>
                    <p><strong>Description:</strong> Provide free or subsidized teacher education in exchange for service commitments, particularly in high-need subjects and schools. Expand loan forgiveness programs for teachers who serve in challenging placements.</p>
                    
                    <div class="pros-cons">
                        <div class="pros">
                            <h4>Advantages</h4>
                            <ul>
                                <li>Targets high-need areas specifically</li>
                                <li>Reduces financial barriers to teaching</li>
                                <li>Builds service commitment</li>
                                <li>Can be scaled gradually</li>
                            </ul>
                        </div>
                        <div class="cons">
                            <h4>Challenges</h4>
                            <ul>
                                <li>Doesn't address ongoing compensation issues</li>
                                <li>Service requirements may feel coercive</li>
                                <li>Administrative complexity</li>
                                <li>Limited impact if working conditions don't improve</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="policy-option">
                    <h3>Option 4: Career Ladder and Professional Development System</h3>
                    <p><strong>Description:</strong> Create differentiated roles and compensation for teachers based on expertise and responsibility. Master teachers could mentor novices, lead curriculum development, or take on hybrid teaching-administrative roles with corresponding salary increases.</p>
                    
                    <div class="pros-cons">
                        <div class="pros">
                            <h4>Advantages</h4>
                            <ul>
                                <li>Provides career advancement without leaving teaching</li>
                                <li>Retains expert teachers in classrooms</li>
                                <li>Improves overall teacher quality</li>
                                <li>Can include compensation increases</li>
                            </ul>
                        </div>
                        <div class="cons">
                            <h4>Challenges</h4>
                            <ul>
                                <li>Complex to design and implement</li>
                                <li>Requires fair evaluation systems</li>
                                <li>May create internal competition</li>
                                <li>Union concerns about differentiation</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="citation">
                    <h3>References & Data Sources</h3>
                    <div class="citation-item">1. Garcia, E., & Weiss, E. (2023). "The teacher shortage is real, large and growing, and worse than we thought." Economic Policy Institute.</div>
                    <div class="citation-item">2. Sutcher, L., Darling-Hammond, L., & Carver-Thomas, D. (2024). "Understanding Teacher Shortages: An Analysis of Districts and Schools." Learning Policy Institute.</div>
                    <div class="citation-item">3. National Center for Education Statistics. (2024). "Teacher Attrition and Mobility: Results from the Teacher Follow-up Survey."</div>
                    <div class="citation-item">4. Bureau of Labor Statistics. (2024). "Job Openings and Labor Turnover Survey - Education and Health Services."</div>
                    <div class="citation-item">5. Ingersoll, R., Merrill, E., Stuckey, D., & Collins, G. (2023). "Seven Trends: The Transformation of the Teaching Force." CPRE Research Reports.</div>
                    <div class="citation-item">6. State Education Department Reports (Various States, 2023-2024). Teacher supply and demand data.</div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Â© 2024 Policy Brief on Teacher Shortage | Created for Educational and Policy Analysis Purposes</p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem;">Data sources: Learning Policy Institute, NCES, Bureau of Labor Statistics, Economic Policy Institute</p>
    </footer>

    <script>
        // Navigation functionality
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                
                // Update active states
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                
                document.getElementById(targetId).classList.add('active');
                this.classList.add('active');
                
                // Scroll to top
                window.scrollTo(0, 0);
            });
        });

        // Chart data and initialization
        async function loadCSVData() {
            const csvData = `State,Percentage
Nevada,6.2
Arizona,5.8
Mississippi,4.9
California,4.7
Florida,4.5
Washington,4.3
Texas,4.1
New Mexico,4.0
Oklahoma,3.9
Alabama,3.8
Georgia,3.7
Indiana,3.6
Hawaii,3.5
South Carolina,3.4
Tennessee,3.3
Louisiana,3.2
North Carolina,3.1
Virginia,3.0
Oregon,2.9
Colorado,2.8
Kansas,2.7
Michigan,2.6
Missouri,2.5
Ohio,2.4
Illinois,2.3
Wisconsin,2.2
Pennsylvania,2.1
New York,2.0
Massachusetts,1.9
Minnesota,1.8
Maryland,1.7
Connecticut,1.6
New Jersey,1.5`;

            const lines = csvData.trim().split('\n');
            const data = lines.slice(1).map(line => {
                const [state, percentage] = line.split(',');
                return { state: state.trim(), percentage: parseFloat(percentage) };
            });

            // Distribution Histogram
            const ranges = ['0-1%', '1-2%', '2-3%', '3-4%', '4-5%', '5%+'];
            const counts = [0, 0, 0, 0, 0, 0];
            
            data.forEach(d => {
                const p = d.percentage;
                if (p < 1) counts[0]++;
                else if (p < 2) counts[1]++;
                else if (p < 3) counts[2]++;
                else if (p < 4) counts[3]++;
                else if (p < 5) counts[4]++;
                else counts[5]++;
            });

            const ctx2 = document.getElementById('distributionChart').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ranges,
                    datasets: [{
                        label: 'Number of States',
                        data: counts,
                        backgroundColor: 'rgba(52, 152, 219, 0.8)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 15,
                            ticks: {
                                stepSize: 3
                            },
                            title: {
                                display: true,
                                text: 'Number of States'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Shortage Rate Range'
                            }
                        }
                    }
                }
            });

            // Regional averages (simplified grouping)
            const regions = {
                'Northeast': ['Connecticut', 'Maine', 'Massachusetts', 'New Hampshire', 'New Jersey', 'New York', 'Pennsylvania', 'Rhode Island', 'Vermont'],
                'South': ['Alabama', 'Arkansas', 'Delaware', 'Florida', 'Georgia', 'Kentucky', 'Louisiana', 'Maryland', 'Mississippi', 'North Carolina', 'Oklahoma', 'South Carolina', 'Tennessee', 'Texas', 'Virginia', 'West Virginia'],
                'Midwest': ['Illinois', 'Indiana', 'Iowa', 'Kansas', 'Michigan', 'Minnesota', 'Missouri', 'Nebraska', 'North Dakota', 'Ohio', 'South Dakota', 'Wisconsin'],
                'West': ['Alaska', 'Arizona', 'California', 'Colorado', 'Hawaii', 'Idaho', 'Montana', 'Nevada', 'New Mexico', 'Oregon', 'Utah', 'Washington', 'Wyoming']
            };

            const regionalAvg = {};
            for (const [region, states] of Object.entries(regions)) {
                const stateData = data.filter(d => states.includes(d.state));
                regionalAvg[region] = stateData.reduce((sum, d) => sum + d.percentage, 0) / stateData.length;
            }

            const ctx3 = document.getElementById('regionalChart').getContext('2d');
            new Chart(ctx3, {
                type: 'bar',
                data: {
                    labels: Object.keys(regionalAvg),
                    datasets: [{
                        label: 'Average Shortage Rate (%)',
                        data: Object.values(regionalAvg),
                        backgroundColor: [
                            'rgba(46, 204, 113, 0.8)',
                            'rgba(241, 196, 15, 0.8)',
                            'rgba(155, 89, 182, 0.8)',
                            'rgba(52, 152, 219, 0.8)'
                        ],
                        borderColor: [
                            'rgba(46, 204, 113, 1)',
                            'rgba(241, 196, 15, 1)',
                            'rgba(155, 89, 182, 1)',
                            'rgba(52, 152, 219, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 4,
                            title: {
                                display: true,
                                text: 'Average Shortage Rate (%)'
                            }
                        }
                    }
                }
            });

            // Absenteeism Chart
            const ctx4 = document.getElementById('absenteeismChart').getContext('2d');
            new Chart(ctx4, {
                type: 'line',
                data: {
                    labels: ['2018', '2019', '2020', '2021', '2022', '2023', '2024'],
                    datasets: [{
                        label: 'National Average Absenteeism (%)',
                        data: [15.2, 15.5, 13.8, 15.9, 21.2, 28.7, 26.1, 23.4],
                        borderColor: 'rgba(52, 152, 219, 1)',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 32,
                            title: {
                                display: true,
                                text: 'Absenteeism Rate (%)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(2) + '%';
                                }
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Year'
                            }
                        }
                    }
                }
            });

            // Job Trends Chart
            const ctx5 = document.getElementById('jobTrendsChart').getContext('2d');
            new Chart(ctx5, {
                type: 'line',
                data: {
                    labels: ['2018', '2019', '2020', '2021', '2022', '2023', '2024'],
                    datasets: [{
                        label: 'Job Openings',
                        data: [1.8, 2.0, 2.1, 2.6, 2.9, 3.1, 2.9, 2.5],
                        borderColor: 'rgba(52, 152, 219, 1)',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 2,
                        tension: 0.4
                    },
                    {
                        label: 'Hires',
                        data: [1.5, 1.6, 1.4, 1.6, 1.7, 1.7, 1.6, 1.5],
                        borderColor: 'rgba(231, 76, 60, 1)',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 2,
                        tension: 0.4
                    },
                    {
                        label: 'Quits',
                        data: [0.8, 0.9, 0.9, 0.8, 0.9, 1.0, 0.9, 0.9],
                        borderColor: 'rgba(241, 196, 15, 1)',
                        backgroundColor: 'rgba(241, 196, 15, 0.1)',
                        borderWidth: 2,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 3.5,
                            title: {
                                display: true,
                                text: 'Millions'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Year'
                            }
                        }
                    }
                }
            });
        }

        // Load charts when page loads
        window.addEventListener('DOMContentLoaded', loadCSVData);
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</body>
</html>
